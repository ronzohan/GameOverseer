<html>
   <head>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-theme.min.css" rel="stylesheet">
	<link href="css/custom.css" rel="stylesheet">
	<link href="css/jquery-ui.min.css" rel="stylesheet">
   </head>
   <body>
 
   	<div id="header"></div> 
   	
   	<div class="container">
	  <div class="panel panel-default">
	    <div class="panel-heading clearfix"> 
				<h4 class="panel-title pull-left" style="padding-top: 7.5px;">My League</h4>
      <div class="btn-group pull-right">
        <a href="#" class="btn btn-default btn-sm glyphicon glyphicon-plus" id="newleague"> New League</a>
      </div>	    
	    
	    </div>
	    
	      <table class="table">
		<thead>
		  <th width="30%">Name</th>
		  <th width="15%" >Sport</th>
		  <th  width="15%">Fixture Type</th>
		  <th>Actions</th>
		</thead>
		<tbody id="leaguetable">
 
		</tbody>
	      </table>
	</div>
	</div>
 	</div>
 	<div id="adddialog" title="Add New League">
 			<p id="status"></p>
 			League Name:&nbsp<input type="text" name="League Name" id="leaguename"/><br><br>

			Sport:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
			<input type="text" name="Sport" id="sport"/><br><br>

			Fixture Type:&nbsp 

			<select id="fixturetype">
				<option value="Single Elimination">Single Elimination</option>
				<option value="Double Elimination">Double Elimination</option>						 
			</select>	 		

	</div>
	
	<div id="editdialog" title="Edit League Info">
		
	
	
	</div>

	<div id="dialog-confirm" title="Confirm Delete">
		<p id="confirm-message">Are you really sure you want to delete this league? Once deleted, it cannot be recovered anymore.</p>
	</div>
</body>
        <script src="javascript/jquery.js"></script>
	<script src="javascript/bootstrap.min.js"></script>
	<script src="javascript/globs.js"></script>
	<script src="javascript/jqinit.js"></script>   
        <script src="javascript/jquery-ui.min.js"></script> 
	<script>
	  $(function(){
	    $("#header").load("header.html"); 
	  });
	  
		$(document).ready(fetchLeagueByManagerId(getCookie('userid'))); //parameter depends on who's the user
		 
		$("#dialog-confirm").dialog({
		autoOpen: false,
		resizable: false,
		modal: true,
		title: "Modal",
		height: 200,
		width: 400,
		buttons: {
		    "Yes": function () {
		        $(this).dialog('close');
		        deleteLeague($(this).data('leagueid'),$(this).data('managerid'))
		    },
		        "No": function () {
		        $(this).dialog('close');
		    }
		}
	});

	$("#newleague").click(
            function () {
		$("#create").show();
		$("#status").empty();
                $("#adddialog").dialog('open');
                return false;
            }
        );

	$("#adddialog").dialog({ 
			autoOpen: false,
			height: 280,
            		width: 350,
            		modal: true,
            		resizable: false,
		    	buttons: {
		        	CreateLeague:{ 
		            		text: 'Create',
					id : 'create',
		            		click : function (){
		                			setleague(getCookie('userid'),$('#leaguename').val(),
							$('#fixturetype').val(),$('#sport').val());						
		            			}
		        	},
		        Close: function () {
				fetchLeagueByManagerId(getCookie('userid'));
				$("input").prop('disabled', false);
			        $(this).dialog("close");
		        }
            		}
      
        	});

	
   	</script>	  
</html>

